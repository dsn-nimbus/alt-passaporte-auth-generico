!function(o){"use strict";o.module("alt.passaporte-auth-generico",[]).constant("CHAVE_USUARIO","pass_usuario_auth").constant("CHAVE_INFORMACOES","info").constant("CHAVE_ID_PRODUTO","idProduto").constant("PASSAPORTE_API_AUTHORIZATION_BASE",altAmbienteUrl.getEndpoint("https://passaporte2__ambiente__.alterdata.com.br/passaporte-rest-api/rest/authorization")).config(["$httpProvider",function(o){delete o.defaults.headers.common["X-Requested-With"]}]).config(["$locationProvider",function(o){o.html5Mode(!0)}]).provider("PaginaUsuarioLogado",function(){this.url="/",this.$get=function(){return this.url}}).service("LeitorUrl",["$location",function(o){this.getValorPor=function(t){return o.search()[t]}}]).service("PassaporteService",["$http","LeitorUrl","PASSAPORTE_API_AUTHORIZATION_BASE",function(o,t,r){this.pegaInformacoesPorToken=function(t,n){return o.get(r+"?token="+t+"&idProduto="+n).then(function(o){return o.data})}}]).factory("redirecionaPaginaUsuarioLogado",["$window","PaginaUsuarioLogado",function(o,t){return function(){o.location.replace(t)}}]).service("UsuarioInfo",["$window","$log","$q","redirecionaPaginaUsuarioLogado","LeitorUrl","PassaporteService","CHAVE_USUARIO","CHAVE_INFORMACOES","CHAVE_ID_PRODUTO","PaginaUsuarioLogado",function(o,t,r,n,e,a,i,s,c,u){var f=e.getValorPor(s),g=e.getValorPor(c);this.registraInformacoesRedireciona=function(){this.registraInformacoesApenas().then(n)},this.registraInformacoesApenas=function(){return a.pegaInformacoesPorToken(f,g).then(function(t){return o.localStorage.setItem(i,JSON.stringify(t)),t})["catch"](function(n){return o.alert("Erro ao buscar as informações pelo token (passaporte)."),t.error(n),r.reject(n)})}}]).controller("AuthCtrl",["UsuarioInfo",function(o){!function(){o.registraInformacoesRedireciona()}()}])}(window.angular);